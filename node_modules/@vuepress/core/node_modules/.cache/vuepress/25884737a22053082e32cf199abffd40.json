{"remainingRequest":"D:\\github\\gma\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\github\\gma\\theme-reco\\components\\Common.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\github\\gma\\theme-reco\\components\\Common.vue","mtime":1651470668972},{"path":"D:\\github\\gma\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651470666187},{"path":"D:\\github\\gma\\node_modules\\babel-loader\\lib\\index.js","mtime":1651470666116},{"path":"D:\\github\\gma\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651470666187},{"path":"D:\\github\\gma\\node_modules\\vue-loader\\lib\\index.js","mtime":1651470668770}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIGNvbXB1dGVkLCByZWYsIG9uTW91bnRlZCwgdG9SZWZzLCBnZXRDdXJyZW50SW5zdGFuY2UgfSBmcm9tICd2dWUtZGVtaScNCmltcG9ydCBOYXZiYXIgZnJvbSAnQHRoZW1lL2NvbXBvbmVudHMvTmF2YmFyJw0KaW1wb3J0IFNpZGViYXIgZnJvbSAnQHRoZW1lL2NvbXBvbmVudHMvU2lkZWJhcicNCmltcG9ydCBQZXJzb25hbEluZm8gZnJvbSAnQHRoZW1lL2NvbXBvbmVudHMvUGVyc29uYWxJbmZvJw0KaW1wb3J0IFBhc3N3b3JkIGZyb20gJ0B0aGVtZS9jb21wb25lbnRzL1Bhc3N3b3JkJw0KaW1wb3J0IHsgc2V0VGltZW91dCB9IGZyb20gJ3RpbWVycycNCg0KZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsNCiAgY29tcG9uZW50czogeyBTaWRlYmFyLCBOYXZiYXIsIFBhc3N3b3JkLCBQZXJzb25hbEluZm8gfSwNCg0KICBwcm9wczogew0KICAgIHNpZGViYXI6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiB0cnVlDQogICAgfSwNCiAgICBzaWRlYmFySXRlbXM6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgZGVmYXVsdDogKCkgPT4gW10NCiAgICB9LA0KICAgIHNob3dNb2R1bGU6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZQ0KICAgIH0NCiAgfSwNCg0KICBzZXR1cCAocHJvcHMsIGN0eCkgew0KICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCkucHJveHkNCg0KICAgIGNvbnN0IGlzU2lkZWJhck9wZW4gPSByZWYoZmFsc2UpDQogICAgY29uc3QgaXNIYXNLZXkgPSByZWYodHJ1ZSkNCiAgICBjb25zdCBpc0hhc1BhZ2VLZXkgPSByZWYodHJ1ZSkNCiAgICBjb25zdCBmaXJzdExvYWQgPSByZWYodHJ1ZSkNCg0KICAgIGNvbnN0IHNob3VsZFNob3dTaWRlYmFyID0gY29tcHV0ZWQoKCkgPT4gcHJvcHMuc2lkZWJhckl0ZW1zLmxlbmd0aCA+IDApDQogICAgY29uc3QgYWJzb2x1dGVFbmNyeXB0aW9uID0gY29tcHV0ZWQoKCkgPT4gew0KICAgICAgcmV0dXJuIGluc3RhbmNlLiR0aGVtZUNvbmZpZy5rZXlQYWdlICYmIGluc3RhbmNlLiR0aGVtZUNvbmZpZy5rZXlQYWdlLmFic29sdXRlRW5jcnlwdGlvbiA9PT0gdHJ1ZQ0KICAgIH0pDQogICAgY29uc3Qgc2hvdWxkU2hvd05hdmJhciA9IGNvbXB1dGVkKCgpID0+IHsNCiAgICAgIGNvbnN0IHsgdGhlbWVDb25maWcgfSA9IGluc3RhbmNlLiRzaXRlDQogICAgICBjb25zdCB7IGZyb250bWF0dGVyIH0gPSBpbnN0YW5jZS4kcGFnZQ0KDQogICAgICBpZiAoDQogICAgICAgIGZyb250bWF0dGVyLm5hdmJhciA9PT0gZmFsc2UgfHwNCiAgICAgICAgdGhlbWVDb25maWcubmF2YmFyID09PSBmYWxzZQ0KICAgICAgKSByZXR1cm4gZmFsc2UNCg0KICAgICAgcmV0dXJuICgNCiAgICAgICAgaW5zdGFuY2UuJHRpdGxlIHx8DQogICAgICAgIHRoZW1lQ29uZmlnLmxvZ28gfHwNCiAgICAgICAgdGhlbWVDb25maWcucmVwbyB8fA0KICAgICAgICB0aGVtZUNvbmZpZy5uYXYgfHwNCiAgICAgICAgaW5zdGFuY2UuJHRoZW1lTG9jYWxlQ29uZmlnLm5hdg0KICAgICAgKQ0KICAgIH0pDQoNCiAgICBjb25zdCBwYWdlQ2xhc3NlcyA9IGNvbXB1dGVkKCgpID0+IHsNCiAgICAgIGNvbnN0IGNsYXNzVmFsdWUgPSB7DQogICAgICAgICduby1uYXZiYXInOiAhc2hvdWxkU2hvd05hdmJhci52YWx1ZSwNCiAgICAgICAgJ3NpZGViYXItb3Blbic6IGlzU2lkZWJhck9wZW4udmFsdWUsDQogICAgICAgICduby1zaWRlYmFyJzogIXNob3VsZFNob3dTaWRlYmFyLnZhbHVlDQogICAgICB9DQoNCiAgICAgIGNvbnN0IHsgcGFnZUNsYXNzOiB1c2VyUGFnZUNsYXNzIH0gPSBpbnN0YW5jZS4kZnJvbnRtYXR0ZXIgfHwge30NCiAgICAgIGlmICh1c2VyUGFnZUNsYXNzKSBjbGFzc1ZhbHVlW3VzZXJQYWdlQ2xhc3NdID0gdHJ1ZQ0KDQogICAgICByZXR1cm4gY2xhc3NWYWx1ZQ0KICAgIH0pDQoNCiAgICBjb25zdCBoYXNLZXkgPSAoKSA9PiB7DQogICAgICBjb25zdCB7IGtleVBhZ2UgfSA9IGluc3RhbmNlLiR0aGVtZUNvbmZpZw0KICAgICAgaWYgKCFrZXlQYWdlIHx8ICFrZXlQYWdlLmtleXMgfHwga2V5UGFnZS5rZXlzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICBpc0hhc0tleS52YWx1ZSA9IHRydWUNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQoNCiAgICAgIGxldCB7IGtleXMgfSA9IGtleVBhZ2UNCiAgICAgIGtleXMgPSBrZXlzLm1hcChpdGVtID0+IGl0ZW0udG9Mb3dlckNhc2UoKSkNCiAgICAgIGlzSGFzS2V5LnZhbHVlID0ga2V5cyAmJiBrZXlzLmluZGV4T2Yoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgna2V5JykpID4gLTENCiAgICB9DQogICAgY29uc3QgaW5pdFJvdXRlckhhbmRsZXIgPSAoKSA9PiB7DQogICAgICBpbnN0YW5jZS4kcm91dGVyLmFmdGVyRWFjaCgoKSA9PiB7DQogICAgICAgIGlzU2lkZWJhck9wZW4udmFsdWUgPSBmYWxzZQ0KICAgICAgfSkNCiAgICB9DQogICAgY29uc3QgaGFzUGFnZUtleSA9ICgpID0+IHsNCiAgICAgIGxldCBwYWdlS2V5cyA9IGluc3RhbmNlLiRmcm9udG1hdHRlci5rZXlzDQogICAgICBpZiAoIXBhZ2VLZXlzIHx8IHBhZ2VLZXlzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICBpc0hhc1BhZ2VLZXkudmFsdWUgPSB0cnVlDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KDQogICAgICBwYWdlS2V5cyA9IHBhZ2VLZXlzLm1hcChpdGVtID0+IGl0ZW0udG9Mb3dlckNhc2UoKSkNCg0KICAgICAgaXNIYXNQYWdlS2V5LnZhbHVlID0gcGFnZUtleXMuaW5kZXhPZihzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGBwYWdlS2V5JHt3aW5kb3cubG9jYXRpb24ucGF0aG5hbWV9YCkpID4gLTENCiAgICB9DQogICAgY29uc3QgdG9nZ2xlU2lkZWJhciA9ICh0bykgPT4gew0KICAgICAgaXNTaWRlYmFyT3Blbi52YWx1ZSA9IHR5cGVvZiB0byA9PT0gJ2Jvb2xlYW4nID8gdG8gOiAhaXNTaWRlYmFyT3Blbi52YWx1ZQ0KICAgIH0NCiAgICBjb25zdCBoYW5kbGVMb2FkaW5nID0gKCkgPT4gew0KICAgICAgY29uc3QgdGltZSA9IGluc3RhbmNlLiRmcm9udG1hdHRlci5ob21lICYmIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2ZpcnN0TG9hZCcpID09IHVuZGVmaW5lZCA/IDEwMDAgOiAwDQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgZmlyc3RMb2FkLnZhbHVlID0gZmFsc2UNCiAgICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2ZpcnN0TG9hZCcpID09IHVuZGVmaW5lZCkgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnZmlyc3RMb2FkJywgZmFsc2UpDQogICAgICB9LCB0aW1lKQ0KICAgIH0NCg0KICAgIC8vIOmmluasoea4suafk+aXtu+8jHJlY29TaG93TW9kdWxlIOebtOaOpeS4uiB0cnVl77yM5ZCm5YiZ6ZSa54K55aSx5pWIDQogICAgY29uc3QgeyBzaG93TW9kdWxlIH0gPSB0b1JlZnMocHJvcHMpDQogICAgY29uc3QgcmVjb1Nob3dNb2R1bGUgPSBjb21wdXRlZCgoKSA9PiB7DQogICAgICBpZiAoZmlyc3RMb2FkLnZhbHVlKSB7DQogICAgICAgIHJldHVybiB0cnVlDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gc2hvd01vZHVsZS52YWx1ZQ0KICAgICAgfQ0KICAgIH0pDQoNCiAgICBvbk1vdW50ZWQoKCkgPT4gew0KICAgICAgaW5pdFJvdXRlckhhbmRsZXIoKQ0KICAgICAgaGFzS2V5KCkNCiAgICAgIGhhc1BhZ2VLZXkoKQ0KICAgICAgaGFuZGxlTG9hZGluZygpDQogICAgfSkNCg0KICAgIHJldHVybiB7IGlzU2lkZWJhck9wZW4sIGFic29sdXRlRW5jcnlwdGlvbiwgc2hvdWxkU2hvd05hdmJhciwgc2hvdWxkU2hvd1NpZGViYXIsIHBhZ2VDbGFzc2VzLCBoYXNLZXksIGhhc1BhZ2VLZXksIGlzSGFzS2V5LCBpc0hhc1BhZ2VLZXksIHRvZ2dsZVNpZGViYXIsIGZpcnN0TG9hZCwgcmVjb1Nob3dNb2R1bGUgfQ0KICB9LA0KDQogIHdhdGNoOiB7DQogICAgJGZyb250bWF0dGVyIChuZXdWYWwsIG9sZFZhbCkgew0KICAgICAgdGhpcy5oYXNLZXkoKQ0KICAgICAgdGhpcy5oYXNQYWdlS2V5KCkNCiAgICB9DQogIH0NCn0pDQo="},{"version":3,"sources":["Common.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Common.vue","sourceRoot":"theme-reco/components","sourcesContent":["<template>\r\n  <div class=\"theme-container\" :class=\"pageClasses\">\r\n    <div v-if=\"!absoluteEncryption\">\r\n      <transition name=\"fade\">\r\n        <LoadingPage v-show=\"firstLoad\" class=\"loading-wrapper\" />\r\n      </transition>\r\n\r\n      <transition name=\"fade\">\r\n        <Password v-show=\"!firstLoad && !isHasKey\" class=\"password-wrapper-out\" key=\"out\" />\r\n      </transition>\r\n\r\n      <div :class=\"{ 'hide': firstLoad || !isHasKey }\">\r\n        <Navbar v-if=\"shouldShowNavbar\" @toggle-sidebar=\"toggleSidebar\" />\r\n\r\n        <div class=\"sidebar-mask\" @click=\"toggleSidebar(false)\"></div>\r\n\r\n        <Sidebar :items=\"sidebarItems\" @toggle-sidebar=\"toggleSidebar\">\r\n          <PersonalInfo slot=\"top\" />\r\n          <slot name=\"sidebar-bottom\" slot=\"bottom\"/>\r\n        </Sidebar>\r\n\r\n        <Password v-show=\"!isHasPageKey\" :isPage=\"true\" class=\"password-wrapper-in\" key=\"in\"></Password>\r\n        <div :class=\"{ 'hide': !isHasPageKey }\">\r\n          <slot></slot>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-else>\r\n      <transition name=\"fade\">\r\n        <LoadingPage v-if=\"firstLoad\" />\r\n        <Password v-else-if=\"!isHasKey\" />\r\n        <div v-else>\r\n          <Navbar v-if=\"shouldShowNavbar\" @toggle-sidebar=\"toggleSidebar\"/>\r\n\r\n          <div class=\"sidebar-mask\" @click=\"toggleSidebar(false)\"></div>\r\n\r\n          <Sidebar :items=\"sidebarItems\" @toggle-sidebar=\"toggleSidebar\">\r\n            <PersonalInfo slot=\"top\" />\r\n            <slot name=\"sidebar-bottom\" slot=\"bottom\"/>\r\n          </Sidebar>\r\n\r\n          <Password v-if=\"!isHasPageKey\" :isPage=\"true\"></Password>\r\n          <slot v-else></slot>\r\n        </div>\r\n      </transition>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, computed, ref, onMounted, toRefs, getCurrentInstance } from 'vue-demi'\r\nimport Navbar from '@theme/components/Navbar'\r\nimport Sidebar from '@theme/components/Sidebar'\r\nimport PersonalInfo from '@theme/components/PersonalInfo'\r\nimport Password from '@theme/components/Password'\r\nimport { setTimeout } from 'timers'\r\n\r\nexport default defineComponent({\r\n  components: { Sidebar, Navbar, Password, PersonalInfo },\r\n\r\n  props: {\r\n    sidebar: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    sidebarItems: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    showModule: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n\r\n  setup (props, ctx) {\r\n    const instance = getCurrentInstance().proxy\r\n\r\n    const isSidebarOpen = ref(false)\r\n    const isHasKey = ref(true)\r\n    const isHasPageKey = ref(true)\r\n    const firstLoad = ref(true)\r\n\r\n    const shouldShowSidebar = computed(() => props.sidebarItems.length > 0)\r\n    const absoluteEncryption = computed(() => {\r\n      return instance.$themeConfig.keyPage && instance.$themeConfig.keyPage.absoluteEncryption === true\r\n    })\r\n    const shouldShowNavbar = computed(() => {\r\n      const { themeConfig } = instance.$site\r\n      const { frontmatter } = instance.$page\r\n\r\n      if (\r\n        frontmatter.navbar === false ||\r\n        themeConfig.navbar === false\r\n      ) return false\r\n\r\n      return (\r\n        instance.$title ||\r\n        themeConfig.logo ||\r\n        themeConfig.repo ||\r\n        themeConfig.nav ||\r\n        instance.$themeLocaleConfig.nav\r\n      )\r\n    })\r\n\r\n    const pageClasses = computed(() => {\r\n      const classValue = {\r\n        'no-navbar': !shouldShowNavbar.value,\r\n        'sidebar-open': isSidebarOpen.value,\r\n        'no-sidebar': !shouldShowSidebar.value\r\n      }\r\n\r\n      const { pageClass: userPageClass } = instance.$frontmatter || {}\r\n      if (userPageClass) classValue[userPageClass] = true\r\n\r\n      return classValue\r\n    })\r\n\r\n    const hasKey = () => {\r\n      const { keyPage } = instance.$themeConfig\r\n      if (!keyPage || !keyPage.keys || keyPage.keys.length === 0) {\r\n        isHasKey.value = true\r\n        return\r\n      }\r\n\r\n      let { keys } = keyPage\r\n      keys = keys.map(item => item.toLowerCase())\r\n      isHasKey.value = keys && keys.indexOf(sessionStorage.getItem('key')) > -1\r\n    }\r\n    const initRouterHandler = () => {\r\n      instance.$router.afterEach(() => {\r\n        isSidebarOpen.value = false\r\n      })\r\n    }\r\n    const hasPageKey = () => {\r\n      let pageKeys = instance.$frontmatter.keys\r\n      if (!pageKeys || pageKeys.length === 0) {\r\n        isHasPageKey.value = true\r\n        return\r\n      }\r\n\r\n      pageKeys = pageKeys.map(item => item.toLowerCase())\r\n\r\n      isHasPageKey.value = pageKeys.indexOf(sessionStorage.getItem(`pageKey${window.location.pathname}`)) > -1\r\n    }\r\n    const toggleSidebar = (to) => {\r\n      isSidebarOpen.value = typeof to === 'boolean' ? to : !isSidebarOpen.value\r\n    }\r\n    const handleLoading = () => {\r\n      const time = instance.$frontmatter.home && sessionStorage.getItem('firstLoad') == undefined ? 1000 : 0\r\n      setTimeout(() => {\r\n        firstLoad.value = false\r\n        if (sessionStorage.getItem('firstLoad') == undefined) sessionStorage.setItem('firstLoad', false)\r\n      }, time)\r\n    }\r\n\r\n    // 首次渲染时，recoShowModule 直接为 true，否则锚点失效\r\n    const { showModule } = toRefs(props)\r\n    const recoShowModule = computed(() => {\r\n      if (firstLoad.value) {\r\n        return true\r\n      } else {\r\n        return showModule.value\r\n      }\r\n    })\r\n\r\n    onMounted(() => {\r\n      initRouterHandler()\r\n      hasKey()\r\n      hasPageKey()\r\n      handleLoading()\r\n    })\r\n\r\n    return { isSidebarOpen, absoluteEncryption, shouldShowNavbar, shouldShowSidebar, pageClasses, hasKey, hasPageKey, isHasKey, isHasPageKey, toggleSidebar, firstLoad, recoShowModule }\r\n  },\r\n\r\n  watch: {\r\n    $frontmatter (newVal, oldVal) {\r\n      this.hasKey()\r\n      this.hasPageKey()\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.theme-container\r\n  .loading-wrapper\r\n    position absolute\r\n    z-index 22\r\n    top 0\r\n    bottom 0\r\n    left 0\r\n    right 0\r\n    margin auto\r\n  .password-wrapper-out\r\n    position absolute\r\n    z-index 21\r\n    top 0\r\n    bottom 0\r\n    left 0\r\n    right 0\r\n    margin auto\r\n  .password-wrapper-in\r\n    position absolute\r\n    z-index 8\r\n    top 0\r\n    bottom 0\r\n    left 0\r\n    right 0\r\n  .hide\r\n    height 100vh\r\n    overflow hidden\r\n    opacity 0\r\n\r\n.fade-enter-active, .fade-leave-active {\r\n  transition: opacity .5s ease-in-out .5s;\r\n}\r\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\r\n  opacity: 0;\r\n}\r\n</style>\r\n"]}]}